from turtle import *
from random import randint
from math import cos,pi,sin
from time import sleep
def gotopourcent(x,y,tortue=Turtle()):
    tortue.goto((x/100-0.5)*window_width(),(y/100-0.5)*window_height())
def ovalerelatif(prec,longueur,ecrasement,scale=1):
    for i in range(prec):
        forward((longueur+ecrasement*cos(i/prec*2*pi*2))/scale)
        left(360/prec)
def dessintomateabsolu(x=0,y=0,scale=1):
    penup()
    goto(x,y)
    pendown()
    pencolor("#000000")
    fillcolor("#dd3131")
    begin_fill()
    pensize(2/scale)
    ovalerelatif(60,12,6,scale)
    end_fill()
    penup()
    goto(x+60/scale,y+120/scale)
    pendown()
    pencolor("#d06b2b")
    fillcolor("#ffff00")
    begin_fill()
    pensize(4/scale)
    ovalerelatif(30,4,4,scale)
    end_fill()
    penup()
    goto(x,y+180/scale)
    pendown()
    pencolor("#000000")
    fillcolor("#155216")
    begin_fill()
    pensize(2/scale)
    left(15)
    circle(60,30)
    left(172.5)
    circle(40,-55)
    end_fill()
    goto(x,y+180/scale)
    left(0)
    begin_fill()
    pensize(2/scale)
    left(15)
    circle(-60,30)
    left(172.5)
    circle(-40,-55)
    end_fill()
    goto(x,y+180/scale)
    begin_fill()
    pensize(2/scale)
    left(210)
    circle(-60,30)
    left(172.5)
    circle(-40,-55)
    end_fill()
    goto(x,y+180/scale)
    begin_fill()
    right(60)
    forward(5/scale)
    circle(5/scale,90)
    forward(40/scale)
    circle(10/scale,180)
    forward(40/scale)
    circle(5/scale,90)
    forward(5/scale)
    end_fill()
    penup()
def dessinvoitureabsolu(x,y,scale=1):
    penup()
    goto(x,y)
    right(90)
    forward(50/scale)
    left(90)
    pencolor("#000000")
    fillcolor("#0075ff")
    pendown()
    begin_fill()
    forward(100/scale)
    left(90)
    circle(-25/scale,180)
    left(90)
    forward(50/scale)
    left(90)
    forward(50/scale)
    left(90)
    circle(-(200**(1/2))/scale,90)
    left(90)
    forward(50/scale)
    right(45)
    forward((50**(1/2))/scale)
    left(45)
    forward(45/scale)
    right(90)
    forward(45/scale)
    left(90)
    forward(170/scale)
    left(90)
    circle(-(2025**(1/2))/scale,90)
    left(45)
    forward((50**(1/2))/scale)
    right(45)
    forward(50/scale)
    left(45)
    forward((400**(1/2))/scale)
    left(45)
    forward(50/scale)
    left(90)
    forward(50/scale)
    left(90)
    circle(-25/scale,180)
    left(90)
    forward(100/scale)
    end_fill()
    penup()
    forward(84/scale)
    left(90)
    forward(114/scale)
    left(180)
    fillcolor("#00c2ff")
    begin_fill()
    pendown()
    forward(45/scale)
    left(90)
    forward(45/scale)
    left(100)
    circle((3007**(1/2))/scale,70)
    left(10)
    forward(170/scale)
    left(90)
    circle(-(2025**(1/2))/scale,90)
    right(135)
    forward(((2025*2)**(1/2))/scale)
    end_fill()
    penup()
    right(45)
    forward(270/scale)
    right(90)
    forward(49/scale)
    left(45)
    fillcolor("#ffe600")
    begin_fill()
    pendown()
    forward((400**(1/2))/scale)
    right(135)
    circle(-(200**(1/2))/scale,90)
    end_fill()
    penup()
    left(90)
    forward(370/scale)
def voituremochemaismieux(x=0,y=0,scale=1,miroir=1):
    pencolor("#000000")
    fillcolor("#0070b6")
    penup()
    pensize(2*scale)
    direction=heading()
    forward(x)
    left(miroir*90)
    forward(y)
    right(miroir*90)
    x7,y7=pos()
    right(miroir*90)
    forward(scale*67)
    x6,y6=pos()
    pendown()                               #carosserie
    begin_fill()
    left(miroir*90)
    forward(scale*68)
    left(miroir*115)
    x4,y4=pos()
    circle(miroir*scale*-37,230)
    right(miroir*245)
    forward(scale*10)
    (x2,y2)=pos()
    left(miroir*90)
    forward(scale*20)
    right(miroir*45)
    forward(scale*5)
    right(miroir*55)
    circle(miroir*scale*100,29)
    left(miroir*64)
    circle(miroir*scale*150,21)
    x3,y3=pos()
    circle(miroir*scale*150,9)
    circle(miroir*scale*30,21)
    forward(scale*75)
    right(miroir*45)
    circle(miroir*scale*10,85)
    circle(miroir*scale*900,10)
    circle(miroir*scale*20,60)
    circle(miroir*scale*-5,12)
    forward(scale*70)
    circle(miroir*scale*-5,45)
    forward(scale*30)
    left(miroir*10)
    forward(scale*30)
    left(miroir*10)
    circle(miroir*scale*50,50)
    forward(scale*37)
    left(miroir*80)
    circle(miroir*scale*100,37)
    right(miroir*80)
    circle(miroir*scale*-25,45)
    left(miroir*105)
    forward(scale*20)
    left(miroir*120)
    circle(miroir*scale*-37,230)
    x5,y5=pos()
    right(miroir*245)
    forward(scale*41)
    end_fill()              ###########################
    penup()
    forward(scale*127)
    left(miroir*90)
    forward(scale*169)
    left(miroir*91)
    pendown()                               #toit
    forward(scale*183)
    penup()
    left(miroir*160)
    forward(scale*20)
    left(miroir*20)
    pendown()                               #portière
    forward(scale*65)
    circle(miroir*scale*-9,90)
    forward(scale*53)
    left(miroir*22)
    forward(scale*10)
    right(miroir*22)
    forward(scale*74)
    right(miroir*90)
    forward(scale*74)
    right(miroir*90)
    circle(miroir*scale*50,75)
    right(miroir*75)
    forward(scale*30)
    left(miroir*45)
    forward(scale*10)
    right(miroir*45)
    forward(scale*7)
    right(miroir*45)
    forward(scale*10)
    left(miroir*45)
    forward(scale*6)
    right(miroir*40)
    forward(scale*52)
    penup()
    right(miroir*50)
    forward(scale*17)
    right(miroir*90)
    forward(scale*5)
    left(miroir*90)
    fillcolor("#90e8fb")
    begin_fill()
    pendown()                               #première fenètre
    forward(scale*40)
    circle(miroir*scale*-7,90)
    forward(scale*45)
    circle(miroir*scale*-7,90)
    forward(scale*52)
    x1,y1=pos()
    right(miroir*40)
    forward(scale*37)
    right(miroir*87)
    forward(scale*37)
    circle(miroir*scale*-13,53)
    forward(scale*7)
    end_fill()
    penup()
    goto(x1,y1)
    forward(scale*90)
    begin_fill()
    pendown()                               #deuxieme fenètre
    forward(scale*88)
    circle(miroir*scale*6,127)
    forward(scale*55)
    circle(miroir*scale*10,53)
    forward(scale*53)
    circle(miroir*scale*6,90)
    forward(scale*46)
    circle(miroir*scale*6,90)
    end_fill()
    penup()
    goto(x1,y1)
    right(miroir*90)
    pendown()                               #rétroviseur
    fillcolor("#cdcdcd")
    begin_fill()
    circle(miroir*scale*-3,90)
    forward(scale*27)
    circle(miroir*scale*-3,90)
    forward(scale*19)
    circle(miroir*scale*-3,90)
    forward(scale*27)
    circle(miroir*scale*-3,90)
    forward(scale*19)
    end_fill()
    circle(miroir*scale*-3,90)
    forward(scale*27)
    circle(miroir*scale*-3,90)
    forward(scale*17)
    right(miroir*90)
    forward(scale*19)
    right(miroir*20)
    circle(miroir*scale*-10,90)
    penup()
    right(miroir*70)
    goto(x6,y6)
    forward(scale*132)
    fillcolor("#d00000")
    begin_fill()
    left(miroir*25)
    pendown()                               #truc rouge devant
    circle(miroir*scale*-70,58)
    right(miroir*60)
    forward(scale*19)
    right(miroir*45)
    forward(scale*8)
    right(miroir*65)
    circle(miroir*scale*100,37)
    right(miroir*80)
    circle(miroir*scale*-25,60)
    end_fill()
    right(miroir*30)
    circle(miroir*scale*-70,58)
    right(miroir*60)
    forward(scale*19)
    right(miroir*110)
    circle(miroir*scale*100,37)
    penup()
    left(miroir*150)
    forward(scale*57)
    fillcolor("#ffda3f")
    pendown()                               #phare avant
    begin_fill()
    circle(miroir*scale*-5,60)
    circle(miroir*scale*-40,50)
    right(miroir*75)
    circle(miroir*scale*60,24)
    right(miroir*110)
    circle(miroir*scale*60,32)
    right(miroir*80)
    circle(miroir*scale*-20,35)
    right(miroir*60)
    circle(miroir*scale*-40,52)
    left(miroir*180)
    circle(miroir*scale*40,52)
    right(miroir*100)
    circle(miroir*scale*-40,25)
    left(miroir*16)
    end_fill()
    penup()
    goto(x2,y2)
    fillcolor("#d00000")
    begin_fill()
    pendown()                               #truc rouge arrière
    left(miroir*90)
    forward(scale*5)
    left(miroir*45)
    forward(scale*5)
    left(miroir*40)
    circle(miroir*scale*120,25)
    circle(miroir*scale*9,60)
    circle(miroir*scale*40,28)
    left(miroir*105)
    circle(miroir*scale*-74,48)
    left(miroir*180)
    circle(miroir*scale*74,48)
    left(miroir*105)
    forward(scale*6)
    left(miroir*62)
    circle(miroir*scale*-100,29)
    left(miroir*55)
    forward(scale*7)
    left(miroir*45)
    forward(scale*20)
    right(miroir*91)
    end_fill()
    penup()
    goto(x3,y3)
    fillcolor("#ffda3f")
    pendown()                               #phare arrière
    begin_fill()
    circle(miroir*scale*16,50)
    left(miroir*40)
    forward(scale*12)
    left(miroir*90)
    forward(scale*16)
    left(miroir*180)
    forward(scale*16)
    left(miroir*90)
    forward(scale*28)
    left(miroir*60)
    circle(miroir*scale*20,50)
    left(miroir*66)
    circle(miroir*scale*150,18)
    end_fill()
    penup()
    goto(x4,y4)
    left(miroir*10)
    pendown()                               #roue arrière
    fillcolor("#000000")
    begin_fill()
    circle(miroir*scale*-37)
    end_fill()
    right(miroir*90)
    forward(scale*23)
    left(miroir*90)
    fillcolor("#ffffff")
    begin_fill()
    circle(miroir*scale*-14)
    end_fill()
    penup()
    goto(x5,y5)
    pendown()
    right(miroir*50)
    fillcolor("#000000")
    begin_fill()
    circle(miroir*scale*37)
    end_fill()
    left(miroir*90)
    forward(scale*23)
    right(miroir*90)
    fillcolor("#ffffff")
    begin_fill()
    circle(miroir*scale*14)
    end_fill()
    right(miroir*64)
    penup()
    goto(x6,y6)
    left(miroir*90)
    forward(scale*80)
    left(miroir*90)
    forward(scale*5)
    right(miroir*90)
    fillcolor("#cdcdcd")
    begin_fill()
    pendown()                               #poignée
    forward(scale*5)
    right(miroir*110)
    circle(miroir*scale*23,40)
    pendown()
    right(miroir*110)
    forward(scale*5)
    right(miroir*70)
    circle(miroir*scale*-23,40)
    end_fill()
    setheading(direction)
def halteres(x=0,y=0,scale=1,miroir=1):
    pencolor("#000000")
    fillcolor("#edf0f1")
    penup()
    pensize(2*scale)
    direction=heading()
    forward(scale*x)
    left(miroir*90)
    forward(scale*y)
    right(miroir*90)
    left(miroir*90)
    forward(scale*21)
    right(miroir*90)
    pendown()                               #barre
    begin_fill()
    forward(scale*285)
    circle(miroir*miroir*miroir*scale*-10,90)
    forward(scale*22)
    circle(miroir*miroir*miroir*scale*-10,90)
    forward(scale*570)
    circle(miroir*miroir*miroir*scale*-10,90)
    forward(scale*22)
    circle(miroir*miroir*miroir*scale*-10,90)
    forward(scale*285)
    end_fill()
    forward(scale*137)
    fillcolor("#bfc5c8")
    begin_fill()
    left(miroir*90)
    forward(scale*10)
    right(miroir*90)
    forward(scale*10)
    right(miroir*90)
    forward(scale*62)
    right(miroir*90)
    forward(scale*10)
    right(miroir*90)
    forward(scale*52)
    end_fill()
    right(miroir*90)
    penup()
    forward(scale*134)
    pendown()
    begin_fill()
    left(miroir*90)
    forward(scale*20)
    right(miroir*90)
    forward(scale*13)
    right(miroir*90)
    forward(scale*82)
    right(miroir*90)
    forward(scale*13)
    right(miroir*90)
    forward(scale*62)
    end_fill()
    fillcolor("#3d3f46")
    begin_fill()
    forward(scale*55)
    circle(miroir*miroir*miroir*scale*21,180)
    forward(scale*152)
    circle(miroir*miroir*miroir*scale*21,180)
    forward(scale*97)
    end_fill()
    penup()
    left(miroir*90)
    forward(scale*42)
    right(miroir*90)

    pendown()
    begin_fill()
    forward(scale*75)
    circle(miroir*miroir*miroir*scale*21,180)
    forward(scale*192)
    circle(miroir*miroir*miroir*scale*21,180)
    forward(scale*117)
    end_fill()
    penup()
    left(miroir*90)
    forward(scale*42)
    right(miroir*90)

    pendown()
    begin_fill()
    forward(scale*95)
    circle(miroir*miroir*miroir*scale*21,180)
    forward(scale*232)
    circle(miroir*miroir*miroir*scale*21,180)
    forward(scale*137)
    end_fill()
    penup()
    left(miroir*90)
    forward(scale*42)
    right(miroir*90)
    
    penup()
    forward(scale*-42)
    left(miroir*90)
    forward(scale*283)
    
    fillcolor("#bfc5c8")
    pendown()
    begin_fill()
    left(miroir*90)
    forward(scale*10)
    right(miroir*90)
    forward(scale*10)
    right(miroir*90)
    forward(scale*62)
    right(miroir*90)
    forward(scale*10)
    right(miroir*90)
    forward(scale*52)
    end_fill()
    right(miroir*90)
    penup()
    forward(scale*134)
    pendown()
    begin_fill()
    left(miroir*90)
    forward(scale*20)
    right(miroir*90)
    forward(scale*13)
    right(miroir*90)
    forward(scale*82)
    right(miroir*90)
    forward(scale*13)
    right(miroir*90)
    forward(scale*62)
    end_fill()
    fillcolor("#3d3f46")
    begin_fill()
    forward(scale*55)
    circle(miroir*miroir*miroir*scale*21,180)
    forward(scale*152)
    circle(miroir*miroir*miroir*scale*21,180)
    forward(scale*97)
    end_fill()
    penup()
    left(miroir*90)
    forward(scale*42)
    right(miroir*90)

    pendown()
    begin_fill()
    forward(scale*75)
    circle(miroir*miroir*miroir*scale*21,180)
    forward(scale*192)
    circle(miroir*miroir*miroir*scale*21,180)
    forward(scale*117)
    end_fill()
    penup()
    left(miroir*90)
    forward(scale*42)
    right(miroir*90)

    pendown()
    begin_fill()
    forward(scale*95)
    circle(miroir*miroir*miroir*scale*21,180)
    forward(scale*232)
    circle(miroir*miroir*miroir*scale*21,180)
    forward(scale*137)
    end_fill()
    penup()
    left(miroir*90)
    forward(scale*42)
    right(miroir*90)
    pendown()
def caleçon(x=0,y=0,scale=1,miroir=1):
    pencolor("#000000")
    fillcolor("#000000")
    penup()
    pensize(2*scale)
    direction=heading()
    forward(scale*x)
    left(miroir*90)
    forward(scale*y)
    right(miroir*90)
    left(miroir*90)
    forward(scale*47)
    right(miroir*90)
    pendown()
    begin_fill()
    forward(scale*70)
    left(miroir*100)
    forward(scale*20)
    pencolor("#ffffff")
    left(miroir*80)
    forward(scale*135)
    left(miroir*80)
    pencolor("#000000")
    forward(scale*20)
    left(miroir*100)
    forward(scale*70)
    end_fill()
    fillcolor("#004680")
    begin_fill()
    forward(scale*72)
    right(miroir*80)
    forward(scale*25)
    circle(scale*-190,8)
    forward(scale*53)
    right(miroir*65)
    circle(scale*-100,41)
    right(miroir*70)
    forward(scale*15)
    circle(scale*7,175)
    forward(scale*15)
    right(miroir*80)
    circle(scale*-100,46)
    right(miroir*59)
    forward(scale*53)
    circle(scale*-190,8)
    forward(scale*19)
    right(miroir*79)
    forward(scale*72)
    end_fill()
    penup()
    forward(scale*-68)
    left(90)
    forward(scale*-50)
    pencolor("#ffffff")
    write("PETIT CUL", font=("Arial", int(20*scale), "normal"))
def nounours(x=0,y=0,scale=1,miroir=1):
    pencolor("#00ffff")
    fillcolor("#a55424")
    penup()
    pensize(2*scale)
    direction=heading()
    forward(scale*x)
    left(miroir*90)
    forward(scale*y)
    right(miroir*90)
    forward(-12)
    pendown()
    begin_fill()
    ovalerelatif(30*scale,17.5,-2,scale)
    #end_fill()
    fillcolor("#fcceac")
    begin_fill()
    ovalerelatif(30*scale,11,5,scale)
    #end_fill()
def lit(x=0,y=0,scale=1,miroir=1):
    pencolor("#000000")
    fillcolor("#80201f")
    penup()
    x2,y2=pos()
    pensize(2*scale)
    direction=heading()
    forward(scale*x)
    left(miroir*90)
    forward(scale*y)
    right(miroir*miroir*90)
    forward(scale*-74)
    left(miroir*90)
    forward(scale*5)
    right(miroir*63)
    pendown()
    begin_fill()
    forward(scale*81)
    right(miroir*54)
    forward(scale*55)
    right(miroir*126)
    forward(scale*81)
    right(miroir*54)
    forward(scale*55)
    left(miroir*117)
    end_fill()
    fillcolor("#5f1918")
    begin_fill()
    forward(scale*15)
    left(miroir*63)
    forward(scale*55)
    left(miroir*117)
    x1,y1=pos()
    forward(scale*15)
    end_fill()
    fillcolor("#300605")
    begin_fill()
    forward(scale*-15)
    right(miroir*63)
    forward(scale*81)
    left(miroir*63)
    forward(scale*15)
    end_fill()
    fillcolor("#626161")
    begin_fill()
    forward(scale*-15)
    right(miroir*63)
    forward(scale*29)
    left(miroir*63)
    forward(scale*15)
    left(miroir*117)
    forward(scale*29)
    end_fill()
    fillcolor("#dfe0e2")
    begin_fill()
    forward(scale*-29)
    right(miroir*54)
    forward(scale*55)
    left(miroir*54)
    forward(scale*29)
    end_fill()
    penup()
    goto(x1,y1)
    pendown()
    left(miroir*63)
    fillcolor("#392714")
    begin_fill()
    forward(scale*17)
    left(miroir*117)
    forward(scale*11)
    left(miroir*63)
    forward(scale*11)
    right(miroir*63)
    forward(scale*90)
    right(miroir*117)
    forward(scale*11)
    left(miroir*117)
    forward(scale*9)
    left(miroir*63)
    forward(scale*17)
    end_fill()
    penup()
    goto(x1,y1)
    pendown()
    fillcolor("#57391f")
    begin_fill()
    forward(scale*-17)
    left(miroir*63)
    forward(scale*11)
    right(miroir*63)
    forward(scale*11)
    left(miroir*63)
    forward(scale*33)
    right(miroir*63)
    forward(scale*-11)
    left(miroir*63)
    forward(scale*11)
    right(miroir*63)
    forward(scale*17)
    end_fill()
    penup()
    goto(x2,y2)
    setheading(direction)
def soleil(x,y,freq=10,tortue=Turtle()):
    gotopourcent(x+2,y,tortue)
    tortue.pendown()
    tortue.fillcolor("#ffff00")
    tortue.begin_fill()
    for t in range(100):
        gotopourcent(2*cos(t/100*2*pi)+x,2*sin(t/100*2*pi)+y,tortue)
        if t%freq==0:
            tortue.pencolor("#ffff00")
            gotopourcent(5*cos(t/100*2*pi)+x,5*sin(t/100*2*pi)+y,tortue)
            gotopourcent(2*cos(t/100*2*pi)+x,2*sin(t/100*2*pi)+y,tortue)
            tortue.pencolor("#000000")
    tortue.end_fill()
def nuage(x,y,scale=1,tortue=Turtle()):
    tortue.penup()
    tortue.pencolor("#000000")
    tortue.fillcolor("#ffffff")
    gotopourcent(x,y,tortue)
    tortue.pendown()
    tortue.begin_fill()
    tortue.setheading(180)
    tortue.circle(-10*scale,90)
    tortue.circle(-30*scale,120)
    tortue.left(120)
    tortue.circle(-40*scale,180)
    tortue.left(120)
    tortue.circle(-30*scale,120)
    tortue.circle(-10*scale,90)
    gotopourcent(x,y,tortue)
    tortue.end_fill()
def lampe(x=0,y=0):
    x2,y2=pos()
    penup()
    ymax=window_height()/2
    goto(x,ymax)
    begin_fill()
    pencolor("#000000")
    fillcolor("#dddddd")
    pendown()
    goto(x+3,ymax)
    goto(x+3,y+50)
    goto(x-3,y+50)
    goto(x-3,ymax)
    end_fill()
    penup()
    fillcolor("#f0f000")
    goto(x-10,y+50)
    pendown()
    begin_fill()
    goto(x+10,y+50)
    for y1 in range(y+50,y-50,-1):
        if y1>y:
            goto(x+10+10*((y1-(y+50))/50)**2,y1)
        else:
            goto(x+60-10*(((y-50)-y1)/50-1)**2,y1)
    penup()
    goto(x-10,y+50)
    pendown()
    for y1 in range(y+50,y-50,-1):
        if y1>y:
            goto(x-10-10*((y1-(y+50))/50)**2,y1)
        else:
            goto(x-60+10*(((y-50)-y1)/50-1)**2,y1)
    for x1 in range(x-50,x+50):
        goto(x1,4*((x1-x)/50)**2-52+y)
    end_fill()
    penup()
    goto(x-20,(-20/15)**2-55+y)
    pendown()
    fillcolor("#eae59a")
    begin_fill()
    for x1 in range(x-20,x+20):
        goto(x1,4*((x1-x)/15)**2-58+y)
    end_fill()
    penup()
    goto(x2,y2)
def fenetres(posnuagex):
    tortuefenetres=Turtle(undobuffersize=0,visible=False,shape="square")
    tortuefenetres.pencolor("#000000")
    tortuefenetres.fillcolor("#00ffff")
    tortuefenetres.penup()
    gotopourcent(5,100,tortuefenetres)
    tortuefenetres.pendown()
    tortuefenetres.begin_fill()
    gotopourcent(95,100,tortuefenetres)
    gotopourcent(95,80,tortuefenetres)
    gotopourcent(5,80,tortuefenetres)
    gotopourcent(5,100,tortuefenetres)
    tortuefenetres.end_fill()
    tortuefenetres.penup()
    soleil(10,93,10,tortuefenetres)
    for k in range(8):
        nuage((posnuagex+sin(k+31)*40)%90+10,sin(k)*10+90,1/(2+0.5*sin(k)),tortuefenetres)
        update()
    tortuefenetres.setundobuffer(0)
    tortuefenetres.clear()

    





#Screen().bgpic('lit.png')
tracer(0)
t=1
undobuffersize=0
ht()
while True:
    t+=0.3
    print(undobufferentries())
    undobuffersize=0
    #clearscreen()
    tracer(0)
    fenetres(t)
    #lampe(randint(-300,300),200)
    sleep(0.05)
